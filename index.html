<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulasi Deposito</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-6">
  <div class="max-w-3xl mx-auto bg-white shadow-xl rounded-xl p-6">
    <h1 class="text-2xl font-bold mb-4 text-center">Simulasi Deposito</h1>

    <!-- Form Input -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
      <div>
        <label class="block text-sm font-medium mb-1">Plafon (Nominal Deposito)</label>
        <input id="plafon" type="text" class="w-full border rounded-lg p-2" placeholder="10000000" oninput="formatPlafon(this)">
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Suku Bunga (% per tahun)</label>
        <input id="bunga" type="text" class="w-full border rounded-lg p-2 bg-gray-100" readonly>
      </div>
      <div>
        <label class="block text-sm font-medium mb-1">Tenor (bulan)</label>
        <select id="tenor" class="w-full border rounded-lg p-2">
          <option value="1">1 bulan</option>
          <option value="3">3 bulan</option>
          <option value="6">6 bulan</option>
          <option value="12">12 bulan</option>
        </select>
      </div>
    </div>

    <div class="flex justify-center mb-6">
      <button onclick="hitungDeposito()" class="bg-blue-600 hover:bg-blue-700 text-white font-medium px-6 py-2 rounded-lg">
        Hitung
      </button>
    </div>

    <!-- Hasil -->
    <div id="hasil" class="hidden bg-gray-50 p-4 rounded-lg border">
      <h2 class="text-lg font-semibold mb-2">Hasil Simulasi</h2>
      <p class="text-sm text-gray-600 mb-2">Perhitungan di bawah belum termasuk biaya administrasi dan lain-lain.</p>
      <div class="grid grid-cols-2 gap-2">
        <p>Nominal Deposito</p><p id="nominal"></p>
        <p>Pajak</p><p id="pajak"></p>
        <p>Bunga Bersih Per Bulan</p><p id="bungaBersihBulan"></p>
        <p>Bunga Bersih Per Tahun</p><p id="bungaBersih"></p>
        <p>Total Diterima</p><p id="totalDiterima"></p>
      </div>
    </div>

    <!-- Tabel -->
    <div id="tabelWrap" class="hidden mt-6">
      <h2 class="text-lg font-semibold mb-2">Tabel Simulasi Per Bulan</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full border border-gray-200 text-sm text-right">
          <thead class="bg-gray-100">
            <tr>
              <th class="border px-2 py-1 text-left">Bulan</th>
              <th class="border px-2 py-1">Pajak</th>
              <th class="border px-2 py-1">Bunga Bersih / Bulan</th>
            </tr>
          </thead>
          <tbody id="tabelBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Footer Catatan -->
    <div class="mt-6 text-xs text-gray-600">
      <p class="font-semibold">Catatan:</p>
      <ol class="list-decimal list-inside">
        <li>Sesuai dengan ketentuan perpajakan mengenai simpanan deposito, saldo/hasil di atas Rp7.500.000 dikenakan pajak sesuai peraturan yang berlaku.</li>
        <li>Hasil simulasi ini menggambarkan perhitungan dengan Asumsi untuk 1 (satu) rekening / Nasabah, baik tabungan maupun deposito.</li>
        <li>Suku bunga dapat berubah sewaktu-waktu mengikuti ketentuan yang berlaku.</li>
        <li>Perhitungan ini hanya merupakan simulasi, hasil sebenarnya dapat berbeda sesuai kondisi dan data aktual.</li>
      </ol>
    </div>
  </div>

  <script>
    function fmt(num) {
      return new Intl.NumberFormat('id-ID').format(num);
    }
    function formatPlafon(el) {
      let val = el.value.replace(/\D/g, "");
      el.value = val ? parseInt(val).toLocaleString("id-ID") : "";
    }
    function parseNumber(str) {
      return parseFloat(str.replace(/\./g, "").replace(/,/g, "")) || 0;
    }

    function tentukanBunga(plafon, tenor) {
      if (plafon < 5000000) return null; // tidak memenuhi syarat
      if (plafon >= 5000000 && plafon <= 10000000) return 5.25;
      if (plafon > 10000000) {
        if (tenor === 1) return 5.25;
        if (tenor === 3) return 5.50;
        if (tenor === 6) return 5.57;
        if (tenor === 12) {
          if (plafon <= 25000000) return 6.00;
          if (plafon > 25000000) return 6.25;
        }
      }
      return 0;
    }

    function hitungDeposito() {
      var plafon = parseNumber(document.getElementById('plafon').value);
      var tenor = parseInt(document.getElementById('tenor').value) || 0;
      var bungaTahunan = tentukanBunga(plafon, tenor);

      if (!bungaTahunan) {
        alert("Minimal deposito adalah Rp 5.000.000");
        return;
      }

      document.getElementById('bunga').value = bungaTahunan;

      var bungaBulanan = bungaTahunan / 12 / 100;
      var bungaKotorTotal = plafon * bungaBulanan * tenor;

      // Pajak hanya jika plafon >= 7.500.000
      var pajakTotal = plafon >= 7500000 ? bungaKotorTotal * 0.20 : 0;
      var bungaBersihTotal = bungaKotorTotal - pajakTotal;
      var bungaBersihPerBulan = bungaBersihTotal / tenor;
      var totalDiterima = plafon + bungaBersihTotal;

      // Ringkasan hasil
      document.getElementById('hasil').classList.remove('hidden');
      document.getElementById('nominal').innerText = ": Rp " + fmt(plafon);
      document.getElementById('pajak').innerText = ": Rp " + fmt(Math.round(pajakTotal));
      document.getElementById('bungaBersihBulan').innerText = ": Rp " + fmt(Math.round(bungaBersihPerBulan));
      document.getElementById('bungaBersih').innerText = ": Rp " + fmt(Math.round(bungaBersihTotal));
      document.getElementById('totalDiterima').innerText = ": Rp " + fmt(Math.round(totalDiterima));

      // Tabel bulanan
      var tbody = document.getElementById('tabelBody');
      tbody.innerHTML = "";
      for (var i = 1; i <= tenor; i++) {
        var bungaKotor = plafon * bungaBulanan;
        var pajak = plafon >= 7500000 ? bungaKotor * 0.20 : 0;
        var bungaBersih = bungaKotor - pajak;
        var row = "<tr>" +
          "<td class='border px-2 py-1 text-left'>" + i + "</td>" +
          "<td class='border px-2 py-1'>" + fmt(Math.round(pajak)) + "</td>" +
          "<td class='border px-2 py-1'>" + fmt(Math.round(bungaBersih)) + "</td>" +
          "</tr>";
        tbody.innerHTML += row;
      }
      document.getElementById('tabelWrap').classList.remove('hidden');
    }
  </script>
</body>
</html>
